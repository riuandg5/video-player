<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=1024">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Video Player</title>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            text-decoration: none;
        }
        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background-color: black;
        }
        #figure {
            position: relative;
        }
        #figure, #video, #controls-mid, #controls-bar {
            margin: 0 auto;
            width: 100vw;
            height: 56.25vw;
            max-width: 177.78vh;
            max-height: 100vh;
        }
        #controls-bar {
            opacity: 0;
            transition: opacity 0.5s;
            position: absolute;
            top: 87%;
            height: 80px;
            max-height: none;
            padding: 0.8em 2em;
        }
        #controls-mid {
            opacity: 0;
            transition: opacity 0.5s;
            position: absolute;
            top: 40%;
            height: 7em;
            max-height: none;
            text-align: center;
            color: white;
        }
        #play-pause {
            font-size: 7em;
            margin: 0 0.8em;
        }
        #backward {
            font-size: 4em;
            vertical-align: 15px;
            color: rgba(255,255,255,0.8);
        }
        #forward {
            font-size: 4em;
            vertical-align: 15px;
            color: rgba(255,255,255,0.8);
        }
        #figure:hover #controls-mid, #figure:hover #controls-bar {
            opacity: 1;
            transition: opacity 0.5s;
        }
        #video-time {
            color: white;
            font-size: 20px;
        }
        #volume {
            font-size: 25px;
            color: white;
        }
        #volume:hover {  
            padding-right: 15px;
        }
        #mute-unmute {
            width: 25px;
            vertical-align: -0.5px;
            margin-right: 10px;
            cursor: pointer;
        }
        #volume-bar, #seek-bar {
            -webkit-appearance: none;
            appearance: none;
            outline: none;
            background-color: rgba(200,200,200,0.8);
            transition: background-color 0.2s;
        }
        #volume-bar:hover, #seek-bar:hover {
            background-color: rgba(200,200,200,1);
            transition: background-color 0.2s;
        }
        #volume-bar {
            width: 0;
            opacity: 0;
            transition: all 0.2s;
            height: 4px;
            border-radius: 2px;
            vertical-align: 7px;
        }
        #volume:hover #volume-bar {
            width: 100px;
            opacity: 1;
            transition: all 0.2s;
        }
        #seek-bar {
            width: 100%;
            height: 8px;
            margin-top: 12px;
            border-radius: 4px;
        }
        #volume-bar::-webkit-slider-thumb, #seek-bar::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            border-radius: 50%;
            box-shadow: 0px 0px 4px 4px rgba(255,255,255,0.3);
            background: white;
            cursor: pointer;
        }
        #volume-bar::-webkit-slider-thumb {
            width: 12px;
            height: 12px;
        }
        #seek-bar::-webkit-slider-thumb {
            width: 22px;
            height: 22px;
        }
        #fullscreen {
            font-size: 25px;
            vertical-align: -0.5px;
            color: white;
            transform: rotate(45deg);
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="figure">
        <video id="video" src="http://iandevlin.github.io/mdn/video-player/video/tears-of-steel-battle-clip-medium.mp4" poster></video>
        <div id="controls-mid">
            <i id="backward" class="fas fa-undo"></i>
            <i id="play-pause" class="far fa-play-circle"></i>
            <i id="forward" class="fas fa-redo"></i>
        </div>
        <div id="controls-bar">
            <span id="video-time"><span id="current-time"></span> / <span id="video-duration"></span></span>
            <span id="volume"><i id="mute-unmute" class="fas fa-volume-up"></i><input type="range" id="volume-bar" min="0" max="1" step="0.1" value="1"></span>
            <i id="fullscreen" class="fas fa-arrows-alt"></i>
            <input type="range" id="seek-bar" value="0" step="0.5">
        </div>
    </div>
    <script>
        window.onload = function () {
            const video = document.getElementById("video");

            const playPause = document.getElementById("play-pause");
            playPause.addEventListener("click", function () {
                if (video.paused == true) {
                    video.play();
                    playPause.classList.remove("fa-play-circle");
                    playPause.classList.add("fa-pause-circle");
                } else {
                    video.pause();
                    playPause.classList.add("fa-play-circle");
                    playPause.classList.remove("fa-pause-circle");
                }
            });

            const backward = document.getElementById("backward");
            const forward = document.getElementById("forward");
            backward.addEventListener("click", function () {
                video.currentTime -= 10;
                seekBar.value = (100 / video.duration) * video.currentTime;
            });
            forward.addEventListener("click", function () {
                video.currentTime += 10;
                seekBar.value = (100 / video.duration) * video.currentTime;
            });

            document.addEventListener('keydown', function (e) {
                switch (e.keyCode) {
                    case 32:
                        playPause.click();
                        break;
                    case 37:
                        video.currentTime -= 10;
                        seekBar.value = (100 / video.duration) * video.currentTime;
                        break;
                    case 39:
                        video.currentTime += 10;
                        seekBar.value = (100 / video.duration) * video.currentTime;
                        break;
                }
            });
            
            const currentTime = document.getElementById("current-time");
            const videoDuration = document.getElementById("video-duration");
            function zeroPrefix(num) {return num % 10 == num ? "0"+num : num}
            function timeFormat(time) {
                const hr = zeroPrefix(parseInt(time/3600));
                const min = zeroPrefix(parseInt((time%3600)/60));
                const sec = zeroPrefix(parseInt(time%60));
                return `${hr}:${min}:${sec}`;
            }
            currentTime.innerHTML = timeFormat(video.currentTime);
            videoDuration.innerHTML = timeFormat(video.duration);
            video.addEventListener('durationchange', function () {
                videoDuration.innerHTML = timeFormat(video.duration);
            });
            video.addEventListener("timeupdate", function () {
                currentTime.innerHTML = timeFormat(video.currentTime);
                seekBar.value = (video.currentTime * 100) / video.duration;
            });
            
            const seekBar = document.getElementById("seek-bar");
            seekBar.addEventListener("change", function () {
                video.currentTime =  (video.duration * seekBar.value) / 100;
            });
            seekBar.addEventListener("mousedown", function () {
                video.pause();
                playPause.classList.add("fa-play-circle");
                playPause.classList.remove("fa-pause-circle");
            });
            seekBar.addEventListener("mouseup", function () {
                video.play();
                playPause.classList.remove("fa-play-circle");
                playPause.classList.add("fa-pause-circle");
            });

            const volumeBar = document.getElementById("volume-bar");
            const muteUnmute = document.getElementById("mute-unmute");
            function changeVolumeIcon(volume) {
                if (volume == 0) {
                    if (muteUnmute.classList.contains("fa-volume-up")) {
                        muteUnmute.classList.remove("fa-volume-up");
                        muteUnmute.classList.add("fa-volume-mute");
                    } else if (muteUnmute.classList.contains("fa-volume-down")) {
                        muteUnmute.classList.remove("fa-volume-down");
                        muteUnmute.classList.add("fa-volume-mute");
                    }
                } else if (volume > 0 && volume <= 0.5) {
                    if (muteUnmute.classList.contains("fa-volume-up")) {
                        muteUnmute.classList.remove("fa-volume-up");
                        muteUnmute.classList.add("fa-volume-down");
                    } else if (muteUnmute.classList.contains("fa-volume-mute")) {
                        muteUnmute.classList.remove("fa-volume-mute");
                        muteUnmute.classList.add("fa-volume-down");
                    }
                } else if (volume >= 0.5 && volume <= 1) {
                    if (muteUnmute.classList.contains("fa-volume-down")) {
                        muteUnmute.classList.remove("fa-volume-down");
                        muteUnmute.classList.add("fa-volume-up");
                    } else if (muteUnmute.classList.contains("fa-volume-mute")) {
                        muteUnmute.classList.remove("fa-volume-mute");
                        muteUnmute.classList.add("fa-volume-up");
                    }
                }
            }
            let previousVolume = 0.5;
            muteUnmute.addEventListener("click", function () {
                if (video.volume == 0) {
                    video.volume = previousVolume;
                } else {
                    previousVolume = video.volume;
                    video.volume = 0;
                }
            });
            video.addEventListener("volumechange", function () {
                volumeBar.value = video.volume;
                changeVolumeIcon(volumeBar.value);
            });
            volumeBar.addEventListener("change", function () {
                video.volume = volumeBar.value;
                changeVolumeIcon(volumeBar.value);
            });

            const fullscreen = document.getElementById("fullscreen");
            fullscreen.addEventListener("click", function () {
                if (video.requestFullscreen) {
                    video.requestFullscreen();
                } else if (video.mozRequestFullScreen) {
                    video.mozRequestFullScreen();
                } else if (video.webkitRequestFullscreen) {
                    video.webkitRequestFullscreen();
                }
            });
        }
    </script>
</body>
</html>
